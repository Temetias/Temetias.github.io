<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#e6e6e6 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.ico rel=icon type=image/ico> <style>main.svelte-16jbveb{position:relative;max-width:56em;padding:2em;margin:8vh auto 0 auto;box-sizing:border-box}@media(max-width:769px){main.svelte-16jbveb{margin:4vh auto 0 auto}}.nav-wrap.svelte-ewvgo9.svelte-ewvgo9{display:flex;justify-content:space-between;margin:0 auto;align-items:stretch;width:100%;max-width:1200px}.primary-nav.svelte-ewvgo9.svelte-ewvgo9{font-weight:500;display:flex;align-items:stretch;justify-content:space-between}ul.svelte-ewvgo9.svelte-ewvgo9{display:flex;align-items:stretch;justify-content:flex-start}li.svelte-ewvgo9.svelte-ewvgo9{padding:0 1em;display:block}a.svelte-ewvgo9.svelte-ewvgo9{font-size:1.4em}.primary-nav.svelte-ewvgo9 a.svelte-ewvgo9{text-decoration:none;text-transform:capitalize}.primary-nav.svelte-ewvgo9 a.svelte-ewvgo9::before{content:"<";margin-right:1px;transition:color .2s}.primary-nav.svelte-ewvgo9 a.svelte-ewvgo9::after{content:"/>";margin-left:1px;transition:color .2s}.primary-nav.svelte-ewvgo9 a.svelte-ewvgo9:hover::after,.primary-nav.svelte-ewvgo9 a.svelte-ewvgo9:hover::before{color:red}.primary-nav.svelte-ewvgo9 a[aria-current].svelte-ewvgo9{color:red}.socials.svelte-ewvgo9.svelte-ewvgo9{padding-right:2em}.socials.svelte-ewvgo9 a.svelte-ewvgo9{font-size:1.6em}.github.svelte-ewvgo9.svelte-ewvgo9,.linkedin.svelte-ewvgo9.svelte-ewvgo9,.twitter.svelte-ewvgo9.svelte-ewvgo9{transition:color .2s}.twitter.svelte-ewvgo9.svelte-ewvgo9:hover{color:#00acee}.github.svelte-ewvgo9.svelte-ewvgo9:hover{color:#333}.linkedin.svelte-ewvgo9.svelte-ewvgo9:hover{color:#0e76a8}.twitch.svelte-ewvgo9.svelte-ewvgo9:hover{color:#6441a5}@media(max-width:660px){.socials-nav.svelte-ewvgo9.svelte-ewvgo9{display:none}.nav-wrap.svelte-ewvgo9.svelte-ewvgo9{justify-content:center}ul.svelte-ewvgo9.svelte-ewvgo9{padding:0;justify-content:center}}@media(max-width:480px){a.svelte-ewvgo9.svelte-ewvgo9{font-size:1.2em}}.fa-svelte.svelte-1d15yci{width:1em;height:1em;overflow:visible;display:inline-block}h1.svelte-1r59cqt{margin-bottom:1em}.content.svelte-1r59cqt{margin:2em 0}.blog-disclaimer.svelte-1r59cqt{display:block;border-bottom:1px solid rgba(0,0,0,.12);border-top:1px solid rgba(0,0,0,.12);padding:2em 0;margin-top:5em;font-weight:600}header.svelte-1jdubmn.svelte-1jdubmn{margin-bottom:1em}a.svelte-1jdubmn.svelte-1jdubmn{font-weight:600}span.svelte-1jdubmn.svelte-1jdubmn{color:rgba(0,0,0,.6)}.post-info.svelte-1jdubmn.svelte-1jdubmn{display:flex}.post-info.svelte-1jdubmn img.svelte-1jdubmn{margin:0;border:1px solid #fff;border-radius:50%;width:4em;height:4em}.post-info-inner.svelte-1jdubmn.svelte-1jdubmn{margin-left:1em}.post-info-inner.svelte-1jdubmn span.svelte-1jdubmn{display:block}.divider-dot.svelte-1jdubmn.svelte-1jdubmn,.divider.svelte-1jdubmn.svelte-1jdubmn{display:inline!important}@media(max-width:480px){.divider.svelte-1jdubmn.svelte-1jdubmn{display:block!important}.divider-dot.svelte-1jdubmn.svelte-1jdubmn{display:none!important;color:red}}footer.svelte-1q2oy3t.svelte-1q2oy3t{max-width:56em;padding:0 2em 2em 2em;margin:8vh auto 0 auto;text-align:center}li.svelte-1q2oy3t.svelte-1q2oy3t{display:block}.socials.svelte-1q2oy3t.svelte-1q2oy3t{text-align:start;padding-left:0;margin-bottom:3em}.socials.svelte-1q2oy3t a.svelte-1q2oy3t{font-size:1.4em}a.svelte-1q2oy3t.svelte-1q2oy3t svg{transform:translateY(.15em)}a.svelte-1q2oy3t.svelte-1q2oy3t{text-decoration:none;line-height:2em}@media(min-width:661px){.socials.svelte-1q2oy3t.svelte-1q2oy3t{display:none}}.last-update.svelte-1q2oy3t.svelte-1q2oy3t{color:#585555}</style> <noscript id=sapper-head-start></noscript><title>Javascript/Typescript tricks and gotchas</title><noscript id=sapper-head-end></noscript> <link href=/client/75a579f5959438209d28/main.js rel=preload as=script><link href=/client/75a579f5959438209d28/blog_$slug.3.js rel=preload as=script></head> <body> <div id=sapper> <div class="svelte-ewvgo9 nav-wrap"><nav aria-label=primary class="svelte-ewvgo9 primary-nav"><ul class=svelte-ewvgo9><li class=svelte-ewvgo9><a href=. class=svelte-ewvgo9>TK </a></li> <li class=svelte-ewvgo9><a href=blog class=svelte-ewvgo9 aria-current=page>blog </a></ul></nav> <nav aria-label=social-links class="svelte-ewvgo9 socials-nav"><ul class="svelte-ewvgo9 socials"><li class=svelte-ewvgo9><a href=https://github.com/Temetias class="svelte-ewvgo9 github" aria-label="My github"><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" fill=currentColor></path></svg></a></li> <li class=svelte-ewvgo9><a href=https://twitter.com/Temetias class="svelte-ewvgo9 twitter" aria-label="My twitter"><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" fill=currentColor></path></svg></a></li> <li class=svelte-ewvgo9><a href=https://www.linkedin.com/in/teemu-karppinen-1174b1139/ class="svelte-ewvgo9 linkedin" aria-label="My linkedin"><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill=currentColor></path></svg></a></li> <li class=svelte-ewvgo9><a href=https://twitch.tv/teemukarppinen class="svelte-ewvgo9 twitch" aria-label="My twitch"><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d=M391.17,103.47H352.54v109.7h38.63ZM285,103H246.37V212.75H285ZM120.83,0,24.31,91.42V420.58H140.14V512l96.53-91.42h77.25L487.69,256V0ZM449.07,237.75l-77.22,73.12H294.61l-67.6,64v-64H140.14V36.58H449.07Z fill=currentColor></path></svg></a></ul></nav></div> <main class=svelte-16jbveb> <h1 class=svelte-1r59cqt id=javascript/typescript-tricks-and-gotchas>Javascript/Typescript tricks and gotchas</h1> <header class=svelte-1jdubmn><div class="svelte-1jdubmn post-info"><img alt="Teemu Karppinen" src=/me2.jpg class=svelte-1jdubmn> <div class="svelte-1jdubmn post-info-inner"><a href=https://teemukarppinen.dev class=svelte-1jdubmn>Teemu Karppinen</a> <span class=svelte-1jdubmn><span class="svelte-1jdubmn divider">10/23/2020</span> <span class="svelte-1jdubmn divider-dot">•</span> <span class="svelte-1jdubmn divider">4 min read</span></span></div></div></header> <div class="svelte-1r59cqt content"><p>Ok, so this is going to be a quicker and lighter one. I bundled a random mess of tricks and gotchas you might find useful when writing Javascript and Typescript! We all like our code clean and bug-free, and hopefully some of these tricks help you next time you're hammering code.</p> <h2 id=trick---assigning-class-properties-in-constructors-🤩>TRICK - Assigning class properties in constructors 🤩</h2> <p>A nice one for you OOP fans out there. You know the annoying part of assigning the stuff from constructor to this context? You know, all this nonsense: <img alt="alt text" src=/class-bad.PNG title="So much boilerplate!"></p> <p>Well, there's actually no need for all that. You can do this instead: <img alt="alt text" src=/class-good.PNG title="Neat, readable, compact. 😍"></p> <h2 id=gotcha---class-method-binding-🤮>GOTCHA - Class method binding 🤮</h2> <p>I've ranted about this <a href=/managing-event-handlers-in-classes>before</a>: When assigning class methods as callbacks for example into events, they tend to lose their <em>this</em>-context. So, remember to either make a new arrow function callback, or bind the function.</p> <p><img alt="alt text" src=/wroom.PNG title="This context is gimmicky (and bug inviting!). Beware of (and avoid) it."></p> <h2 id=trick---spreading-and-destructuring-everything-🤩>TRICK - Spreading and destructuring everything 🤩</h2> <p>Destructuring is one of my favourite features in Javascript. It allows you to reduce your LoC by a lot sometimes and overall results in compact and clean code. A common misconception is that it only works with objects but it also works for arrays too! I've bundled some examples underneath.</p> <p><img alt="alt text" src=/spread.PNG title="Some examples of the power of spread and destructuring. Be careful not to overdo it!"></p> <h2 id=gotcha---spread-ordering-🤮>GOTCHA - Spread ordering 🤮</h2> <p>Now that we are talking about spreading objects, be careful with the ordering. If you add a key to an object, the spread does in fact override the key! I have to admit, this bit me a couple of times before I started to get into the habit of <em>always spread first</em>.</p> <p><img alt="alt text" src=/sad-toyota.PNG title="Spread can bite you, be careful with the ordering!"></p> <h2 id=trick---currying--partial-application-🤩>TRICK - Currying / Partial application 🤩</h2> <p>This is not only a JavaScript/TypeScript trick but more of a general functional programming concept. Sometimes you might want to make your function take its arguments one by one and return a new function between, instead of passing all of them at once. What this achieves is a specialization of the same functionality. The motivation behind this is to avoid duplicating code and reaching a more readable end result.</p> <p>Let's see an example: <img alt="alt text" src=/curry.PNG title="Simplest example of currying"></p> <p>What happens here? "isIn" is a function which returns a function which returns a computation of some sort. What we achieve here is a specialization of the "complex computation" without actually replicating the computation elsewhere in your codebase. This results in more maintainable code without less factors when refactoring. Also, it kind of reads like normal text, doesn't it?</p> <p>To more effectively utilize this in TypeScript, I've learned that splitting your types based on the provided functionality achieves a very nice typesystem that supports currying. The types for the example above might look something like this: <img alt="alt text" src=/curry-ts.PNG title="Simplest example of currying in TS"></p> <p>To make the most out of this trick, make sure you order your arguments in a way that you put in the stuff you'll know early first and the stuff you know later last. Think about what is the needle and what is the haystack.</p> <p>More stuff about currying and functional JS/TS in general can be found in <a href=https://github.com/getify/Functional-Light-JS>Kyle Simpsons "Functional Light JavaScript"</a>. Strong recommendation for the <a href=https://frontendmasters.com/courses/functional-javascript-v3/ >video course in Frontend Masters</a>. Hands down one of the best online courses I've ever watched.</p> <h2 id=trick---ninja-boolean-conversions-🤩>TRICK - Ninja boolean conversions 🤩</h2> <p>This one is simple: You know how we often flip something to falsy with "!" operator. Well, you can chain two of them to flip to truthy. Very useful for filtering out falsy values from an array for example. <img alt="alt text" src=/bangbang.PNG title="BANG BANG!"> Be careful tho. The normal JS falsy lookup gimmicks apply here. "" is false and so on...</p> <h2 id=gotcha---object-evaluation-when-logging-🤮>GOTCHA - Object evaluation when logging 🤮</h2> <p>This one is especially tricky for beginners. If you enjoy <code>console.log</code> debugging like so many of us, beware of this one. Objects work a bit differently when console.logging them. Especially on Chrome, the object tends to get evaluated when you actually see the log in the console, not when the script actually runs the console.log. This is hard to explain in image form like the other, but beware when you see the little "i" icon next to your object. It means the object was "evaluated just now". This means the state of the object might be totally different to what you're actually expecting.</p> <p>Firefox, my personal daily driver, seems to be much more predictable with this behaviour. But I remember this biting me many times back when I was still using Chrome and just learning JavaScript.</p> <p><img alt="alt text" src=/evaluated.PNG title="This object was evaluted in the time of printing, not when console log was called!"> Beware of the icon next to the object.</p> <h2 id=trick---forcing-object-evaluating-when-logging-🤩>TRICK - Forcing object evaluating when logging 🤩</h2> <p>...But there's a way around this! You can do the goodol' JSON.stringify JSON.parse to get around this. This kills all the references of the object and also removes a lot of the prototype -stuff that's not usually wanted when logging. This is, of course, a very brute force-y approach but can provide useful when you want to do some sanity checks. But let's face it: When debugging you often might wanna check for such things. 😅</p> <hr> <h2 id=outro>Outro</h2> <p>That's it. A couple of useful and not so useful nuggets of knowledge. Hopefully this helps you dodge a bug or clean up an expression or two. Happy hacking! 😊</p> </div> <div class="svelte-1r59cqt blog-disclaimer"><span>Hey! If you're looking for a comment section I'm sorry to disappoint you: I haven't had time to make one yet. 🤐 But if you wanna call me out on my bull💩, just ping me <a href=https://twitter.com/Temetias>@Twitter</a> meanwhile! </span></div></main> <footer class=svelte-1q2oy3t><ul class="svelte-1q2oy3t socials"><li class=svelte-1q2oy3t><a href=https://github.com/Temetias class=svelte-1q2oy3t><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" fill=currentColor></path></svg> /Temetias </a></li> <li class=svelte-1q2oy3t><a href=https://twitter.com/Temetias class=svelte-1q2oy3t><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" fill=currentColor></path></svg> @Temetias </a></li> <li class=svelte-1q2oy3t><a href=https://www.linkedin.com/in/teemu-karppinen-1174b1139/ class=svelte-1q2oy3t><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill=currentColor></path></svg> Teemu Karppinen </a></li> <li class=svelte-1q2oy3t><a href=https://twitch.tv/teemukarppinen class=svelte-1q2oy3t><svg aria-hidden=true class="fa-svelte svelte-1d15yci" role=img viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d=M391.17,103.47H352.54v109.7h38.63ZM285,103H246.37V212.75H285ZM120.83,0,24.31,91.42V420.58H140.14V512l96.53-91.42h77.25L487.69,256V0ZM449.07,237.75l-77.22,73.12H294.61l-67.6,64v-64H140.14V36.58H449.07Z fill=currentColor></path></svg> /teemukarppinen </a></ul> <span class="svelte-1q2oy3t last-update"></span></footer></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"Javascript\u002FTypescript tricks and gotchas",slug:"js-ts-tricks-and-gotchas",date:new Date(1603411200000),author:"Teemu Karppinen",authorImg:"\u002Fme2.jpg",authorLink:"https:\u002F\u002Fteemukarppinen.dev",content:"\u003Cp\u003EOk, so this is going to be a quicker and lighter one. I bundled a random mess of tricks and gotchas you might find useful when writing Javascript and Typescript! We all like our code clean and bug-free, and hopefully some of these tricks help you next time you&#39;re hammering code.\u003C\u002Fp\u003E\n\u003Ch2 id=\"trick---assigning-class-properties-in-constructors-🤩\"\u003ETRICK - Assigning class properties in constructors 🤩\u003C\u002Fh2\u003E\n\u003Cp\u003EA nice one for you OOP fans out there. You know the annoying part of assigning the stuff from constructor to this context? You know, all this nonsense:\n\u003Cimg src=\"\u002Fclass-bad.PNG\" alt=\"alt text\" title=\"So much boilerplate!\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EWell, there&#39;s actually no need for all that. You can do this instead:\n\u003Cimg src=\"\u002Fclass-good.PNG\" alt=\"alt text\" title=\"Neat, readable, compact. 😍\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"gotcha---class-method-binding-🤮\"\u003EGOTCHA - Class method binding 🤮\u003C\u002Fh2\u003E\n\u003Cp\u003EI&#39;ve ranted about this \u003Ca href=\"\u002Fmanaging-event-handlers-in-classes\"\u003Ebefore\u003C\u002Fa\u003E: When assigning class methods as callbacks for example into events, they tend to lose their \u003Cem\u003Ethis\u003C\u002Fem\u003E-context. So, remember to either make a new arrow function callback, or bind the function.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fwroom.PNG\" alt=\"alt text\" title=\"This context is gimmicky (and bug inviting!). Beware of (and avoid) it.\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"trick---spreading-and-destructuring-everything-🤩\"\u003ETRICK - Spreading and destructuring everything 🤩\u003C\u002Fh2\u003E\n\u003Cp\u003EDestructuring is one of my favourite features in Javascript. It allows you to reduce your LoC by a lot sometimes and overall results in compact and clean code. A common misconception is that it only works with objects but it also works for arrays too! I&#39;ve bundled some examples underneath.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fspread.PNG\" alt=\"alt text\" title=\"Some examples of the power of spread and destructuring. Be careful not to overdo it!\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"gotcha---spread-ordering-🤮\"\u003EGOTCHA - Spread ordering 🤮\u003C\u002Fh2\u003E\n\u003Cp\u003ENow that we are talking about spreading objects, be careful with the ordering. If you add a key to an object, the spread does in fact override the key! I have to admit, this bit me a couple of times before I started to get into the habit of \u003Cem\u003Ealways spread first\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fsad-toyota.PNG\" alt=\"alt text\" title=\"Spread can bite you, be careful with the ordering!\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"trick---currying--partial-application-🤩\"\u003ETRICK - Currying \u002F Partial application 🤩\u003C\u002Fh2\u003E\n\u003Cp\u003EThis is not only a JavaScript\u002FTypeScript trick but more of a general functional programming concept. Sometimes you might want to make your function take its arguments one by one and return a new function between, instead of passing all of them at once. What this achieves is a specialization of the same functionality. The motivation behind this is to avoid duplicating code and reaching a more readable end result.\u003C\u002Fp\u003E\n\u003Cp\u003ELet&#39;s see an example:\n\u003Cimg src=\"\u002Fcurry.PNG\" alt=\"alt text\" title=\"Simplest example of currying\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EWhat happens here? &quot;isIn&quot; is a function which returns a function which returns a computation of some sort. What we achieve here is a specialization of the &quot;complex computation&quot; without actually replicating the computation elsewhere in your codebase. This results in more maintainable code without less factors when refactoring. Also, it kind of reads like normal text, doesn&#39;t it?\u003C\u002Fp\u003E\n\u003Cp\u003ETo more effectively utilize this in TypeScript, I&#39;ve learned that splitting your types based on the provided functionality achieves a very nice typesystem that supports currying. The types for the example above might look something like this:\n\u003Cimg src=\"\u002Fcurry-ts.PNG\" alt=\"alt text\" title=\"Simplest example of currying in TS\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETo make the most out of this trick, make sure you order your arguments in a way that you put in the stuff you&#39;ll know early first and the stuff you know later last. Think about what is the needle and what is the haystack.\u003C\u002Fp\u003E\n\u003Cp\u003EMore stuff about currying and functional JS\u002FTS in general can be found in \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgetify\u002FFunctional-Light-JS\"\u003EKyle Simpsons &quot;Functional Light JavaScript&quot;\u003C\u002Fa\u003E. Strong recommendation for the \u003Ca href=\"https:\u002F\u002Ffrontendmasters.com\u002Fcourses\u002Ffunctional-javascript-v3\u002F\"\u003Evideo course in Frontend Masters\u003C\u002Fa\u003E. Hands down one of the best online courses I&#39;ve ever watched.\u003C\u002Fp\u003E\n\u003Ch2 id=\"trick---ninja-boolean-conversions-🤩\"\u003ETRICK - Ninja boolean conversions 🤩\u003C\u002Fh2\u003E\n\u003Cp\u003EThis one is simple: You know how we often flip something to falsy with &quot;!&quot; operator. Well, you can chain two of them to flip to truthy. Very useful for filtering out falsy values from an array for example.\n\u003Cimg src=\"\u002Fbangbang.PNG\" alt=\"alt text\" title=\"BANG BANG!\"\u003E\nBe careful tho. The normal JS falsy lookup gimmicks apply here. &quot;&quot; is false and so on...\u003C\u002Fp\u003E\n\u003Ch2 id=\"gotcha---object-evaluation-when-logging-🤮\"\u003EGOTCHA - Object evaluation when logging 🤮\u003C\u002Fh2\u003E\n\u003Cp\u003EThis one is especially tricky for beginners. If you enjoy \u003Ccode\u003Econsole.log\u003C\u002Fcode\u003E debugging like so many of us, beware of this one. Objects work a bit differently when console.logging them. Especially on Chrome, the object tends to get evaluated when you actually see the log in the console, not when the script actually runs the console.log. This is hard to explain in image form like the other, but beware when you see the little &quot;i&quot; icon next to your object. It means the object was &quot;evaluated just now&quot;. This means the state of the object might be totally different to what you&#39;re actually expecting.\u003C\u002Fp\u003E\n\u003Cp\u003EFirefox, my personal daily driver, seems to be much more predictable with this behaviour. But I remember this biting me many times back when I was still using Chrome and just learning JavaScript.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"\u002Fevaluated.PNG\" alt=\"alt text\" title=\"This object was evaluted in the time of printing, not when console log was called!\"\u003E\nBeware of the icon next to the object.\u003C\u002Fp\u003E\n\u003Ch2 id=\"trick---forcing-object-evaluating-when-logging-🤩\"\u003ETRICK - Forcing object evaluating when logging 🤩\u003C\u002Fh2\u003E\n\u003Cp\u003E...But there&#39;s a way around this! You can do the goodol&#39; JSON.stringify JSON.parse to get around this. This kills all the references of the object and also removes a lot of the prototype -stuff that&#39;s not usually wanted when logging. This is, of course, a very brute force-y approach but can provide useful when you want to do some sanity checks. But let&#39;s face it: When debugging you often might wanna check for such things. 😅\u003C\u002Fp\u003E\n\u003Chr\u003E\n\u003Ch2 id=\"outro\"\u003EOutro\u003C\u002Fh2\u003E\n\u003Cp\u003EThat&#39;s it. A couple of useful and not so useful nuggets of knowledge. Hopefully this helps you dodge a bug or clean up an expression or two. Happy hacking! 😊\u003C\u002Fp\u003E\n",readTime:4}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');</script><script src=/client/75a579f5959438209d28/main.js></script> 